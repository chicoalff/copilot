{
  "fluxo_livro_verificacao": {
    "etapas": [
      {
        "etapa": 1,
        "nome": "Recepção e Validação Inicial",
        "objetivo": "Confirmar que o livro existe e é pesquisável.",
        "acoes": [
          {
            "id": "1.1",
            "descricao": "Receber inputs do usuário",
            "campos_entrada": {
              "titulo_livro": "string (obrigatório)",
              "autor_livro": "string (obrigatório)",
              "idioma_esperado": "string (opcional, valores: PT, EN)",
              "referencias_opcionais": ["pdf", "links", "documentos"]
            }
          },
          {
            "id": "1.2",
            "descricao": "Validar existência do livro",
            "metodo": "Pesquisar no Google Books, Amazon e Goodreads",
            "query": "[titulo] [autor] site:books.google.com OR site:amazon.com.br OR site:goodreads.com",
            "criterio_sucesso": "Encontrar pelo menos 2 fontes independentes que confirmem a existência do livro",
            "erro_em_caso_falha": {
              "mensagem": "Livro não localizado em fontes públicas. Verifique o título/autor ou forneça mais detalhes.",
              "fontes_consultadas": ["Google Books", "Amazon BR", "Goodreads"]
            }
          },
          {
            "id": "1.3",
            "descricao": "Detectar idioma principal",
            "regras": [
              "Se maioria das fontes estiver em PT-BR → idioma = 'PT'",
              "Se apenas em EN → idioma = 'EN' e notificar usuário com pergunta: Livro encontrado apenas em inglês. Prossigo com pesquisa em EN?"
            ]
          }
        ],
        "saida": {
          "artefato": "A1",
          "formato": {
            "livro": "[título validado]",
            "autor": "[nome completo]",
            "idioma": "PT | EN",
            "status": "confirmado | nao_encontrado",
            "fontes_iniciais": [
              "Google Books (URL)",
              "Amazon (URL)"
            ]
          }
        }
      },
      {
        "etapa": 2,
        "nome": "Pesquisa de Metadados Básicos",
        "objetivo": "Coletar dados bibliográficos completos e verificados.",
        "acoes": [
          {
            "id": "2.1",
            "descricao": "Extrair metadados de fontes prioritárias",
            "ordem_preferencia_fontes": [
              "Site da editora oficial",
              "Google Books (seção 'Sobre este livro')",
              "Amazon (detalhes do produto)",
              "Goodreads (seção 'Details')"
            ],
            "campos_obrigatorios": [
              "título",
              "título_original",
              "editora",
              "ano",
              "páginas",
              "ISBN",
              "edição"
            ]
          },
          {
            "id": "2.2",
            "descricao": "Lidar com dados ausentes",
            "regra": "Se um campo não for encontrado, registrar como 'Não disponível em fontes públicas' com as fontes consultadas",
            "proibicao": "Nunca inventar dados ou estimar valores (ex: ano, páginas)"
          },
          {
            "id": "2.3",
            "descricao": "Validar consistência dos dados",
            "metodo": "Comparar dados entre fontes. Se houver discrepância, priorizar fonte mais oficial (ex: editora > Amazon)"
          }
        ],
        "saida": {
          "artefato": "A2",
          "formato": {
            "metadados": {
              "titulo": "string",
              "titulo_original": "string",
              "autores": ["string"],
              "editora": "string",
              "ano": "number",
              "paginas": "number",
              "isbn": "string",
              "edicao": "string",
              "idioma": "PT-BR | EN",
              "links": [
                {
                  "fonte": "string",
                  "url": "string",
                  "data_acesso": "YYYY-MM-DD"
                }
              ]
            },
            "observacoes": "string"
          }
        }
      }
    ]
  }
}
